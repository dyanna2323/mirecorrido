ğŸ”§ Prompt Unificado â€” Fireapp (Mirecorrido)

Objetivo:
Crear una aplicaciÃ³n web llamada â€œMirecorridoâ€ (en espaÃ±ol) que permita a los usuarios completar desafÃ­os, ver logros, canjear recompensas, revisar ranking, lanzar juegos, chatear y editar su perfil. La app debe ser una SPA con React + Vite + Tailwind, con rutas, accesibilidad, rendimiento (code-splitting), y preparada para desplegar en subruta /mirecorrido/ (GitHub Pages).

TecnologÃ­a solicitada:
- React + Vite + Tailwind
- SPA con React Router
- Code splitting por rutas (React.lazy + Suspense)
- Buenas prÃ¡cticas de accesibilidad (WCAG AA)
- EspaÃ±ol (ES)

Rutas:
- / (redirige a /dashboard)
- /dashboard
- /challenges
- /achievements
- /rewards
- /leaderboard
- /games
- /chat
- /profile
- 404 comodÃ­n

===== 1) Datos (colecciones y semillas) =====
Definir colecciones y semillas mÃ­nimas en el estado interno / mock data.

users {
  id, nombre, avatarUrl, xp:number, nivel:number, saldo:number
}

challenges {
  id, titulo, descripcion, categoria:("diseÃ±o"|"cÃ³digo"|"marketing"|"otros"),
  puntos:number, estado:("pendiente"|"completado"), autorUserId, createdAt
}

achievements {
  id, userId, titulo, icono, descripcion, earnedAt
}

rewards {
  id, titulo, costo:number, stock:number, imagenUrl?, activo:boolean
}

leaderboard {
  id, userId, nombre, puntos:number, posicion:number, avatarUrl
}

messages {
  id, userId, contenido, role:("user"|"assistant"), createdAt
}

Semillas:
- 1 usuario actual: { xp: 1200, nivel: 5, saldo: 300 }
- DesafÃ­os: 8 (2 por categorÃ­a), 3 ya completados
- Logros: 5
- Recompensas: 6 (algunas con stock=0)
- Leaderboard: 10 entradas (usuario actual resaltado)
- Chat: 3 mensajes alternando roles

===== 2) Tema y estilo (Tailwind/Design System) =====
- Color primario: morado #7c3aed; neutrales para fondos y textos.
- TipografÃ­a sans (Inter o similar).
- Componentes: Button (filled/ghost/disabled), Card (header/content), Badge, Chip (para filtros).
- Bordes redondeados (rounded-2xl), sombras suaves, padding cÃ³modo.
- Soportar prefers-reduced-motion: con esa preferencia, desactivar animaciones/transiciones y efectos (como confetti).
- Skeletons para estados de carga.
- DiseÃ±o responsive:
  - Desktop: sidebar izquierda.
  - MÃ³vil: bottom-nav pegado con iconos/labels.

===== 3) Accesibilidad =====
- Enlace â€œSaltar al contenidoâ€ visible al enfocar, href="#main".
- Estructura landmarks: header, main(#main), footer.
- Focus visible en todos los controles.
- aria-current="page" en el item de navegaciÃ³n activo.
- Todas las imÃ¡genes con alt; si decorativas, alt="".
- Toasts/mensajes en aria-live="polite".
- Soporte teclado en navegaciÃ³n y formularios.
- Respetar prefers-reduced-motion (sin animaciones fuertes).

===== 4) Layout y navegaciÃ³n =====
Layout base:
- Header con tÃ­tulo â€œMirecorridoâ€.
- Sidebar (desktop) o bottom-nav (mÃ³vil) con items:
  Inicio(/dashboard), DesafÃ­os, Logros, Recompensas, Ranking, Juegos, Chat, Perfil.
- NavLink activo con fondo morado-50 y texto morado-700, y aria-current="page".
- <main id="main"> para el contenido de cada ruta.

===== 5) Pantallas =====

(5.1) Dashboard (/dashboard)
- Tarjeta de bienvenida con nombre del usuario y barra de progreso al siguiente nivel (usa xp/nivel del usuario).
- MÃ©tricas rÃ¡pidas (cards): â€œDesafÃ­os completadosâ€, â€œPuntos disponiblesâ€ (saldo), â€œLogrosâ€.
- CTA: â€œCompleta 1 desafÃ­o para subir de nivelâ€.
- Skeletons mientras carga.
- Confetti SOLO cuando realmente suba de nivel y si NO hay prefers-reduced-motion.

(5.2) DesafÃ­os (/challenges)
- Lista con chip-filtros por categorÃ­a (todos, diseÃ±o, cÃ³digo, marketing, otros).
- Persistir filtro en URL (?cat=...), y que sobreviva back/forward.
- Ãtem de desafÃ­o: tÃ­tulo, breve descripciÃ³n, puntos, estado (pendiente/completado), botÃ³n â€œCompletarâ€.
- Empty state Ãºtil con CTA (â€œExplora desafÃ­os recomendadosâ€).
- Accesibilidad: botÃ³n con aria-label claro; foco visible.
- Performance: si la lista crece, paginaciÃ³n o virtualizaciÃ³n.

(5.3) Logros (/achievements)
- Grid de logros: icono, tÃ­tulo, descripciÃ³n, fecha earnedAt.
- Empty state: â€œAÃºn no tienes logros. Â¡Completa desafÃ­os para conseguirlos!â€
- VirtualizaciÃ³n si hay mÃ¡s de 100 elementos.

(5.4) Recompensas (/rewards)
- Grid/lista de recompensas: imagen (si hay), tÃ­tulo, costo en puntos, stock, estado (activo).
- BotÃ³n â€œCanjearâ€:
  - Deshabilitado si saldo < costo o stock == 0; mostrar tooltip con motivo (â€œSaldo insuficienteâ€ / â€œSin stockâ€).
  - Modal de confirmaciÃ³n antes de descontar puntos.
- Tras canjear: saldo -= costo; stock -=1; toast de Ã©xito; control de doble clic; manejo de error con toast.

(5.5) Ranking (/leaderboard)
- Tabla simple: posiciÃ³n, avatar, nombre, puntos.
- Resaltar la fila del usuario actual.
- Orden estable; para empates, ordenar por nombre.

(5.6) Juegos (/games)
- Tarjetas de juegos con botÃ³n â€œJugarâ€.
- Modal o pÃ¡gina secundaria con detalle mÃ­nimo.
- Al volver, restaurar el scroll de la lista.

(5.7) Chat (/chat)
- Timeline de mensajes con roles user/assistant, conserva saltos de lÃ­nea.
- Input + botÃ³n enviar; indicador de â€œescribiendoâ€ o spinner al simular respuesta.
- aria-live="polite" para anunciar mensaje recibido.
- BotÃ³n â€œDetenerâ€ si hay generaciÃ³n en curso (simulada si no hay backend real).

(5.8) Perfil (/profile)
- Formulario: avatarUrl (texto), nombre (texto).
- ValidaciÃ³n inline (requerido, longitud).
- Botones: Guardar, Cerrar sesiÃ³n (confirmaciÃ³n), Eliminar cuenta (doble confirmaciÃ³n).
- Toast accesible de Ã©xito/errores.

(5.9) Ruta 404
- PÃ¡gina con mensaje â€œPÃ¡gina no encontradaâ€ y link para volver a Inicio.

===== 6) Acciones (mutaciones y lÃ³gica) =====

(6.1) Completar desafÃ­o (input: challengeId)
- Si ya estÃ¡ completado â†’ toast â€œYa estaba completadoâ€.
- Si pendiente:
  - estado = "completado"
  - saldo del usuario += puntos del desafÃ­o
  - toast Ã©xito: â€œDesafÃ­o completado ğŸ‰â€
  - Optimistic UI: actualizar al instante, confirmar luego.

(6.2) Canjear recompensa (input: rewardId)
- Validaciones:
  - Si saldo < costo â†’ error â€œSaldo insuficienteâ€.
  - Si stock == 0 â†’ error â€œSin stockâ€.
- Efectos:
  - saldo -= costo, stock -= 1 (si todo ok)
  - toast Ã©xito: â€œRecompensa canjeadaâ€
  - Optimistic UI + rollback si falla

(6.3) Chat enviar (input: texto)
- Agregar mensaje del usuario inmediatamente.
- Mostrar placeholder del assistant con spinner/â€œescribiendoâ€¦â€ y luego reemplazar con respuesta simulada.
- Manejar multilinea y scroll a Ãºltimo mensaje.

(6.4) Guardar perfil
- Validar nombre requerido.
- Actualizar usuario; toast â€œÂ¡Listo! Cambios guardados.â€

===== 7) Copys (ES) =====
Botones: Guardar, Cancelar, Completar, Canjear, Ver mÃ¡s, Cerrar sesiÃ³n, Eliminar cuenta.
Mensajes:
- Ã‰xito: â€œÂ¡Listo! Cambios guardados.â€, â€œDesafÃ­o completado ğŸ‰â€, â€œRecompensa canjeadaâ€.
- Error: â€œSaldo insuficienteâ€, â€œSin stockâ€, â€œAlgo saliÃ³ mal, intÃ©ntalo de nuevoâ€.
Empty states:
- DesafÃ­os: â€œNo encontramos desafÃ­os con ese filtro. Prueba otra categorÃ­a.â€
- Logros: â€œAÃºn no tienes logros. Â¡Completa desafÃ­os para conseguirlos!â€
- Recompensas: â€œNo hay recompensas disponibles por ahora.â€
Loading: â€œCargandoâ€¦â€
404: â€œPÃ¡gina no encontrada. Volver al inicioâ€

===== 8) Rendimiento =====
- Code splitting por ruta con React.lazy + Suspense, fallback â€œCargandoâ€¦â€.
- Skeletons visibles durante la carga de listas/paneles.
- Evitar re-render costoso en listas; usar keys estables.

===== 9) Metadatos y PWA =====
- <html lang="es">, <title>Mirecorrido â€” Tu progreso y desafÃ­os</title>
- meta description: â€œSigue tus desafÃ­os, logros y recompensas en Mirecorrido.â€
- Manifest (opcional en export): name/short_name â€œMirecorridoâ€, start_url â€œ/â€, theme_color â€œ#7c3aedâ€.
- Iconos: favicon.svg morado, icono 512x512.

===== 10) Despliegue (si Fireapp exporta a Vite/React) =====
- Para desplegar en subruta /mirecorrido/ (GitHub Pages):
  - En vite.config: base: '/mirecorrido/'
  - BrowserRouter con basename="/mirecorrido"
  - Generar 404.html que sirva de fallback SPA (o copiar dist/index.html a dist/404.html)
  - Variables .env con prefijo VITE_ (p.ej. VITE_BASE44_APP_ID)
- Si la exportaciÃ³n incluye GitHub Actions:
  - Workflow que construye la app y sube dist/ a Pages con un paso para crear 404.html.
